<tr id="client_listing_<%= client.id %>" class="livesearch_result client_listing listing <%= rownum.even? ? 'even' : 'odd' %>">
	<td><%= client.new_record? ? '(NEW)' : client.client_id %></td>
	<td><%= client.full_name %></td>
	<td><%= client.ach? ? 'Bank/'+ (client.account_type == 'C' ? 'Checking' : 'Savings') + (client.bank_account_number ? ": ***#{client.bank_account_number.to_s[-4..-1]}" : ": N/A!") : (client.credit_card_number ? "Credit: ***#{client.credit_card_number.to_s[-4..-1]}" : "Credit: N/A!") %></td>
	<td><%= client.expiration %></td>
	<td><%= client.amount %></td>
	<td><%= (client.goto_invalid.to_a + [client.description]).to_sentence %></td>
	<td><% if !client.new_record? %><%= link_to_remote 'Remove VIP', :url => formatted_remove_vip_client_member_path(:format => 'js', :id => client.id), :before => "flash('Removing VIP for client ##{client.client_id}, please wait...', false, false, true)", :failure => "flash('Failed removing VIP. Please try again, if the problem persists, let us know.', 'Ok');" %> | <%= link_to_remote 'Reload EFT', :url => formatted_reload_eft_client_member_path(:format => 'js', :id => client.id), :before => "flash('Reloading EFT for client ##{client.client_id}, please wait...'), false, false, true", :failure => "flash('Failed reloading EFT. Please try again, if the problem persists, let us know.', 'Ok');" %><% end %> | <span id="refunder_<%= client.id %>"><%= client.state %> <% if client.paid? && false %><%= link_to 'Refund', "javascript:Control.Modal.open('<div class=\\'loading-dialog\\'><img src=\\'/images/ajax-loader.gif\\' valign=\\'middle\\' />Sending refund to #{client.full_name}...</div>'); new Ajax.Updater({success:'refunder_#{client.id}'}, 'eft/refund_clients?for_month=#{@for_month}&client_id=#{client.client_id}', {asynchronous:true, evalScripts:true, onComplete:function(){Control.Modal.close()}}); void(0);", :confirm => "Are you sure you want to REFUND $#{client.amount} to #{client.full_name}?" %><% end %></td>
</tr>
